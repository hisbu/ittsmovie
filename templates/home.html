{% extends "base.html" %}

{% block content %}
<div class="row ipad-width2">
  <div class="col-md-12">
    <div class="title-hd">
      <h2>Discover Movies</h2>
      <span>Browse from TMDB</span>
    </div>
  </div>
</div>

<div class="row ipad-width2">
  <div class="col-md-12">
    {% if data.results %}
      <div class="movie-items">
        <div class="row">
          <div class="slick-multiItem" style="display:flex;flex-wrap:wrap;gap:20px;">
            {% for movie in data.results %}
              <div class="slide-it" style="width:185px;">
                <div class="movie-item">
                  <div class="mv-img">
                    <a href="{{ url_for('detail', id=movie.id, src='home', page=page, sort_by=sort_by) }}">
                      {% if movie.poster_path %}
                        <img src="https://image.tmdb.org/t/p/w300{{ movie.poster_path }}" alt="{{ movie.title }}">
                      {% else %}
                        <img src="{{ url_for('static', filename='images/placeholder-poster.png') }}" alt="{{ movie.title }}">
                      {% endif %}
                    </a>
                  </div>
                  <div class="title-in">
                    <h6>
                      <a href="{{ url_for('detail', id=movie.id, src='home', page=page, sort_by=sort_by) }}">
                        {{ movie.title }}
                      </a>
                    </h6>
                    <p class="rate">
                      <i class="ion-android-star"></i>
                      <span>{{ movie.vote_average | round(1) }}</span> /10
                    </p>
                    <p class="run-time">
                      {{ movie.release_date.split('-')[0] if movie.release_date }} â€¢
                      {{ movie.original_language | upper }}
                    </p>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% else %}
      <p>Tidak ada film yang ditemukan.</p>
    {% endif %}
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <div class="topbar-filter">
      <p>Page <span>{{ page }}</span> of {{ total_pages }}</p>
      <div class="pagination2">
        {% if page > 1 %}
          <a href="{{ url_for('home', page=page-1, sort_by=sort_by) }}">Prev</a>
        {% endif %}
        <span class="active">{{ page }}</span>
        {% if page < total_pages %}
          <a href="{{ url_for('home', page=page+1, sort_by=sort_by) }}">Next</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
